"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var PREFIX=Buffer.from([27,91]),ColorMap={black:0,red:1,green:2,yellow:3,blue:4,purple:5,celeste:6,white:7},MapDirect={up:"A","上":"A",down:"B","下":"B",right:"C","右":"C",left:"D","左":"D"};function getFontStyle(r,t,o){void 0===o&&(o="");var n=30+ColorMap[r],e=40+ColorMap[t],o=Buffer.from((t?e:"")+(r?";"+n:"")+"m"+o);return Buffer.concat([PREFIX,o]).toString()}function clearAllProps(r){void 0===r&&(r="");r=Buffer.from("0m"+r);return Buffer.concat([PREFIX,r]).toString()}function getHighlightString(r){void 0===r&&(r="");r=Buffer.from("1m"+r);return Buffer.concat([PREFIX,r]).toString()}function getUnderLineString(r){void 0===r&&(r="");r=Buffer.from("4m"+r);return Buffer.concat([PREFIX,r]).toString()}function getBlinkString(r){void 0===r&&(r="");r=Buffer.from("5m"+r);return Buffer.concat([PREFIX,r]).toString()}function getRDisplayString(r){void 0===r&&(r="");r=Buffer.from("7m"+r);return Buffer.concat([PREFIX,r]).toString()}function getCancelHideString(r){void 0===r&&(r="");r=Buffer.from("8m"+r);return Buffer.concat([PREFIX,r]).toString()}function controlArrowMove(r,t,o){void 0===r&&(r="down"),void 0===t&&(t=0),void 0===o&&(o="");o=Buffer.from(""+t+MapDirect[r]+o);return Buffer.concat([PREFIX,o]).toString()}function setArrowPosition(r,t,o){void 0===o&&(o="");o=Buffer.from((0===t||t?t:"")+(0===r||r?";"+r:"")+"H"+o);return Buffer.concat([PREFIX,o]).toString()}function clearScreen(r){void 0===r&&(r="");r=Buffer.from("2J"+r);return Buffer.concat([PREFIX,r]).toString()}function saveArrowPosition(r){void 0===r&&(r="");r=Buffer.from("s"+r);return Buffer.concat([PREFIX,r]).toString()}function readArrowPosition(r){void 0===r&&(r="");r=Buffer.from("u"+r);return Buffer.concat([PREFIX,r]).toString()}function hideArrow(r){void 0===r&&(r="");r=Buffer.from("?25l"+r);return Buffer.concat([PREFIX,r]).toString()}function showArrow(r){void 0===r&&(r="");r=Buffer.from("?25h"+r);return Buffer.concat([PREFIX,r]).toString()}function clearPositionAfter(r){void 0===r&&(r="");r=Buffer.from("K"+r);return Buffer.concat([PREFIX,r]).toString()}function bindControlFunc$1(o,n,e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return n.value+=o.apply(void 0,r),e}}function getFmtString(r){void 0===r&&(r="");var t={value:clearAllProps()+r},o={msg:function(r){return t.value+=r=void 0===r?"":r,o},end:function(){return t.value+clearAllProps()}};return o.setFont=bindControlFunc$1(getFontStyle,t,o),o.clearProps=bindControlFunc$1(clearAllProps,t,o),o.highlight=bindControlFunc$1(getHighlightString,t,o),o.underline=bindControlFunc$1(getUnderLineString,t,o),o.blink=bindControlFunc$1(getBlinkString,t,o),o.rdisplay=bindControlFunc$1(getRDisplayString,t,o),o.cancelHide=bindControlFunc$1(getCancelHideString,t,o),o.arrowMove=bindControlFunc$1(controlArrowMove,t,o),o.setArrow=bindControlFunc$1(setArrowPosition,t,o),o.clear=bindControlFunc$1(clearScreen,t,o),o.saveArrow=bindControlFunc$1(saveArrowPosition,t,o),o.readArrow=bindControlFunc$1(readArrowPosition,t,o),o.hideArrow=bindControlFunc$1(hideArrow,t,o),o.showArrow=bindControlFunc$1(showArrow,t,o),o.clearAfter=bindControlFunc$1(clearPositionAfter,t,o),o}function bindControlFunc(o,n,e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return n(o.apply(void 0,r)),e}}var IOStand$1=function(){function r(r){void 0===r&&(r=process),this.process=r,this.__setter__=null,this.oninput=null,this.dataFormat=function(r){return r.toString()}}return r.prototype.start=function(){var t=this;this.process.stdin.on("data",function(r){r=t.dataFormat?t.dataFormat(r):r;t.__setter__&&t.__setter__(r),t.oninput&&t.oninput(r)})},r.prototype.awaitInput=function(){var r=this;return new Promise(function(t,o){try{r.__setter__=function(r){t(r)}}catch(r){o(r)}})},r.prototype.write=function(r){this.process.stdout.write(r=void 0===r?"":r)},r.prototype.writeChain=function(r){function t(r){o.write(r)}var o=this,n={msg:function(r){return t(r=void 0===r?"":r),n}};return t(r=void 0===r?"":r),n.setFont=bindControlFunc(getFontStyle,t,n),n.clearProps=bindControlFunc(clearAllProps,t,n),n.highlight=bindControlFunc(getHighlightString,t,n),n.underline=bindControlFunc(getUnderLineString,t,n),n.blink=bindControlFunc(getBlinkString,t,n),n.rdisplay=bindControlFunc(getRDisplayString,t,n),n.cancelHide=bindControlFunc(getCancelHideString,t,n),n.arrowMove=bindControlFunc(controlArrowMove,t,n),n.setArrow=bindControlFunc(setArrowPosition,t,n),n.clear=bindControlFunc(clearScreen,t,n),n.saveArrow=bindControlFunc(saveArrowPosition,t,n),n.readArrow=bindControlFunc(readArrowPosition,t,n),n.hideArrow=bindControlFunc(hideArrow,t,n),n.showArrow=bindControlFunc(showArrow,t,n),n.clearAfter=bindControlFunc(clearPositionAfter,t,n),n},r.prototype.exit=function(){this.process.exit()},r}(),IOStand=IOStand$1;exports.IOStand=IOStand$1,exports.PREFIX=PREFIX,exports.clearAllProps=clearAllProps,exports.clearPositionAfter=clearPositionAfter,exports.clearScreen=clearScreen,exports.controlArrowMove=controlArrowMove,exports.getBlinkString=getBlinkString,exports.getCancelHideString=getCancelHideString,exports.getFmtString=getFmtString,exports.getFontStyle=getFontStyle,exports.getHighlightString=getHighlightString,exports.getRDisplayString=getRDisplayString,exports.getUnderLineString=getUnderLineString,exports.hideArrow=hideArrow,exports.readArrowPosition=readArrowPosition,exports.saveArrowPosition=saveArrowPosition,exports.setArrowPosition=setArrowPosition,exports.showArrow=showArrow;
